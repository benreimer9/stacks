{"ast":null,"code":"import _objectSpread from \"/Users/benreimer/Develop/stacks/stacks-v3/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _toConsumableArray from \"/Users/benreimer/Develop/stacks/stacks-v3/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/benreimer/Develop/stacks/stacks-v3/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/benreimer/Develop/stacks/stacks-v3/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/benreimer/Develop/stacks/stacks-v3/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/benreimer/Develop/stacks/stacks-v3/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/benreimer/Develop/stacks/stacks-v3/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _taggedTemplateLiteral from \"/Users/benreimer/Develop/stacks/stacks-v3/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/Users/benreimer/Develop/stacks/stacks-v3/src/App.js\";\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\n  h3, h4 {\\n    font-family : 'Poppins';\\n    font-weight : 700;\\n  }\\n  body {\\n    font-family: 'Roboto';\\n    font-weight: 400;\\n    height: 100%;\\n  }\\n  html {\\n    font-size: 16px;\\n    overflow: scroll;\\n    overflow-x: hidden;\\n    height: 100%;\\n  }\\n  ::-webkit-scrollbar {\\n    width: 0px;  /* remove scrollbar space */\\n    background: transparent;  /* optional: just make scrollbar invisible */\\n  }\\n  button {\\n      padding: 0; border: none; font: inherit; color: inherit; background-color: transparent;\\n      border-radius: 6px;\\n      height: 30px;\\n      // width:85px;\\n      padding-top: 4px;\\n      padding-left: 13px;\\n      padding-right: 13px;\\n      font-family: Poppins;\\n      font-weight: 500;\\n      font-size: 1rem;\\n      color: #3D3D3D;\\n      text-align: center;\\n      transition: width .2s;\\n      -webkit-touch-callout: none; /* iOS Safari */\\n      -webkit-user-select: none; /* Chrome/Safari/Opera */\\n      -khtml-user-select: none; /* Konqueror */\\n      -moz-user-select: none; /* Firefox */\\n      -ms-user-select: none; /* Internet Explorer/Edge */\\n       user-select: none;\\n  }\\n  button:focus{\\n    outline: none;\\n  }\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n  @import url('https://fonts.googleapis.com/css?family=Poppins:500,700');\\n  @import url('https://fonts.googleapis.com/css?family=Roboto:300i,400,500');\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  position:relative;\\n  overflow:hidden;\\n  width:100%;\\n  height: 100%;\\n  max-width: 500px;\\n  margin: 0 auto;\\n  display: block;\\n  padding-top: 100px;\\n\\n  @media(min-width:769px){\\n    .App {\\n      margin-top: 40px;\\n    }\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { Component } from 'react';\nimport './App.css';\nimport ViewStacks from './Components/ViewStacks';\nimport { arrayMove } from 'react-sortable-hoc';\nimport styled, { createGlobalStyle } from 'styled-components';\n/**************\nTO DO\n\n\n!- Refactor stack info into stacks array with helper functions aware of draggablelist lib\n\n- How will dayOfHabit handle habits starting on way later dates? lots of null array items?\n- Ability to add a new stack\n- Ability to rearrange stacks (under info)\n- Add new habits (use formik)\n- stack bar color when all complete\n- Streak counter 'working'\n- 'Edit' button\n\n\n- remove unneeded fonts when style is done\n\nNote:\narray of habits (stacks[]) is separate from array of stack info (stacksInfo[])\ndue to how Sortable library works with arrys not objects. Unless I go into their\nlibrary and make some changes I'm stuck with this setup I believe.\nThis is technical debt that may hurt later.\nhttps://github.com/clauderic/react-sortable-hoc\n\nNote:\nNever figured out importing local font files. Might have something to do with needing\nto add a loader to webpack\n\n**************/\n\nvar AppStyled = styled.div(_templateObject());\nvar Typography = createGlobalStyle(_templateObject2());\nvar GlobalStyles = createGlobalStyle(_templateObject3());\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, App);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(App)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      stacks: [[//remove this extra array. But also that will break the functions below :'(\n      {\n        action: \"Meditate 15mins\",\n        cue: \"7:00am\",\n        result: \"neutral\",\n        log: [\"\"]\n      }, {\n        action: \"Exercise\",\n        cue: \"then\",\n        result: \"neutral\",\n        log: [\"\"]\n      }]],\n      stacksInfo: [{\n        name: \"Routine One\",\n        streak: 0,\n        height: \"auto\"\n      }],\n      date: {\n        lastLoggedDay: null,\n        lastLoggedMonth: null,\n        lastLoggedYear: null,\n        dayOfHabit: 0\n      },\n      activeStates: {\n        addModeIsActive: false,\n        addModuleIsActive: false,\n        editModeIsActive: false\n      }\n    };\n\n    _this.habitResultHandler = function (result) {\n      switch (result) {\n        case \"neutral\":\n          return \"complete\";\n\n        case \"complete\":\n          return \"miss\";\n\n        case \"miss\":\n          return \"skip\";\n\n        case \"skip\":\n          return \"neutral\";\n\n        default:\n          return \"neutral\";\n      }\n    };\n\n    _this.habitEasyComplete = function (itemId, stackId) {\n      //turn earlier habits in stack into 'complete' if they're neutral\n      var newStack = _toConsumableArray(_this.state.stacks);\n\n      newStack[stackId] = newStack[stackId].map(function (habit, i) {\n        if (itemId > i && habit.result === \"neutral\") {\n          habit.result = \"complete\";\n          habit.log[_this.state.date.dayOfHabit] = \"complete\";\n          return;\n        }\n\n        return false;\n      }); //add to habit log\n\n      _this.setState({\n        oldStack: newStack\n      });\n    };\n\n    _this.logHabit = function (itemId, stackId) {\n      var newStack = _toConsumableArray(_this.state.stacks);\n\n      var result = newStack[stackId][itemId].result; //neutral, complete, miss, etc.\n\n      var updatedResult = _this.habitResultHandler(result); //toggle to next result\n\n\n      if (updatedResult === \"complete\") {\n        _this.habitEasyComplete(itemId, stackId);\n      }\n\n      newStack[stackId][itemId].result = updatedResult; //update habit log\n\n      var log = newStack[stackId][itemId].log;\n      log[_this.state.date.dayOfHabit] = updatedResult;\n      newStack[stackId][itemId].log = log;\n\n      _this.setState({\n        stacks: newStack\n      });\n\n      _this.updateLocaLStorage();\n    };\n\n    _this.addHabit = function (stackId) {\n      var newStack = _toConsumableArray(_this.state.stacks);\n\n      var activeStates = _this.state.activeStates;\n      var newActiveStates = activeStates;\n      newActiveStates.addModuleIsActive = true;\n\n      _this.setState({\n        activeStates: newActiveStates\n      });\n\n      var cue = prompt(\"Cue : \");\n      var action = prompt(\"Action : \");\n      newStack[stackId].push({\n        action: action,\n        cue: cue,\n        result: \"neutral\",\n        log: []\n      });\n\n      _this.setState({\n        stacks: newStack\n      });\n\n      _this.updateLocaLStorage();\n    };\n\n    _this.shouldStreakUpdate = function () {};\n\n    _this.updateStreakCounter = function (stackId, update) {\n      var newStackInfo = _objectSpread({}, _this.state.stacksInfo);\n\n      if (update === \"failed\") {\n        newStackInfo[stackId].streak--;\n      }\n\n      if (update === \"completed\") {\n        newStackInfo[stackId].streak++;\n      }\n\n      _this.setState({\n        stacksInfo: newStackInfo\n      });\n    };\n\n    _this.toggleStack = function (id) {\n      var toggleStack = _this.state.stacksInfo[id];\n      var newStack = toggleStack;\n      newStack.height = toggleStack.height === 0 ? 'auto' : 0;\n\n      _this.setState({\n        toggleStack: newStack\n      });\n    };\n\n    _this.toggleAddMode = function () {\n      var activeState = _this.state.activeStates;\n      var newActiveState = activeState;\n      newActiveState.addModeIsActive = !activeState.addModeIsActive;\n\n      _this.setState({\n        activeState: newActiveState\n      });\n    };\n\n    _this.onSortEnd = function (_ref) {\n      var oldIndex = _ref.oldIndex,\n          newIndex = _ref.newIndex,\n          collection = _ref.collection;\n\n      _this.setState(function (_ref2) {\n        var stacks = _ref2.stacks;\n\n        var newstacks = _toConsumableArray(stacks);\n\n        newstacks[collection] = arrayMove(stacks[collection], oldIndex, newIndex);\n        return {\n          stacks: newstacks\n        };\n      });\n    };\n\n    _this.checkIsSameDay = function (thisDay, thisMonth, thisYear) {\n      if (_this.state.date.lastLoggedDay === null) {\n        //first day of using the app!\n        return true;\n      } else if (thisDay !== _this.state.date.lastLoggedDay) {\n        if (thisMonth === _this.state.date.lastLoggedMonth && thisYear === _this.state.date.lastLoggedYear) {\n          return false;\n        }\n      } else if (thisDay === _this.state.date.lastLoggedDay && thisMonth === _this.state.date.lastLoggedMonth && thisYear === _this.state.date.lastLoggedYear) {\n        return true;\n      }\n    };\n\n    _this.updateLastLoggedDate = function (thisDay, thisMonth, thisYear) {\n      var newDate = _objectSpread({}, _this.state.date);\n\n      newDate.thisDay = thisDay;\n      newDate.thisMonth = thisMonth;\n      newDate.thisYear = thisYear;\n      newDate.dayOfHabit = newDate.dayOfHabit + 1;\n\n      _this.setState({\n        date: newDate\n      });\n    };\n\n    _this.resetForNewDay = function () {\n      var newDate = _objectSpread({}, _this.state.date);\n\n      newDate.dayOfHabit = newDate.dayOfHabit + 1;\n\n      var stacks = _toConsumableArray(_this.state.stacks);\n\n      stacks[0].map(function (habit) {\n        habit.result = \"neutral\";\n      });\n\n      _this.setState({\n        date: newDate\n      });\n    };\n\n    _this.updateLocaLStorage = function () {\n      //should be called whenever a habit is logged asap, in case the users\n      //then immediately close the app\n      localStorage.setItem(\"Stacks\", JSON.stringify(_this.state.stacks));\n      localStorage.setItem(\"Date\", JSON.stringify(_this.state.date));\n    };\n\n    _this.populateStateFromStorage = function () {\n      //use localStorage to re-populate state when app is refreshed\n      var newStack = JSON.parse(localStorage.getItem('Stacks'));\n      var newDate = JSON.parse(localStorage.getItem('Date'));\n\n      if (newStack) {\n        _this.setState({\n          stacks: newStack\n        });\n      }\n\n      if (newDate) {\n        _this.setState({\n          date: newDate\n        });\n      }\n    };\n\n    _this.clearStorage = function () {\n      localStorage.clear(); //return habit circles to neutral for new day\n\n      var stacks = _toConsumableArray(_this.state.stacks);\n\n      stacks[0].map(function (habit) {\n        habit.result = \"neutral\";\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      //populate storedHabit in state from localStorage from previous sessions\n      this.populateStateFromStorage(); //get the day\n\n      var fullDate = new Date();\n      var thisDay = fullDate.getDate();\n      var thisMonth = fullDate.getMonth();\n      var thisYear = fullDate.getYear();\n      var isSameDay = this.checkIsSameDay(thisDay, thisMonth, thisYear);\n\n      if (!isSameDay) {\n        this.updateLocaLStorage();\n        this.resetForNewDay();\n        this.updateLastLoggedDate(thisDay, thisMonth, thisYear);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(AppStyled, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 372\n        },\n        __self: this\n      }, React.createElement(Typography, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 374\n        },\n        __self: this\n      }), React.createElement(GlobalStyles, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 375\n        },\n        __self: this\n      }), React.createElement(ViewStacks, {\n        stacks: this.state,\n        stacksInfo: this.state.stacksInfo,\n        day: this.state.date.dayOfHabit,\n        toggleStack: this.toggleStack,\n        logHabit: this.logHabit,\n        onSortEnd: this.onSortEnd,\n        addHabit: this.addHabit,\n        toggleAddMode: this.toggleAddMode,\n        activeStates: this.state.activeStates,\n        nextDay: this.resetForNewDay,\n        clearStorage: this.clearStorage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 377\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["/Users/benreimer/Develop/stacks/stacks-v3/src/App.js"],"names":["React","Component","ViewStacks","arrayMove","styled","createGlobalStyle","AppStyled","div","Typography","GlobalStyles","App","state","stacks","action","cue","result","log","stacksInfo","name","streak","height","date","lastLoggedDay","lastLoggedMonth","lastLoggedYear","dayOfHabit","activeStates","addModeIsActive","addModuleIsActive","editModeIsActive","habitResultHandler","habitEasyComplete","itemId","stackId","newStack","map","habit","i","setState","oldStack","logHabit","updatedResult","updateLocaLStorage","addHabit","newActiveStates","prompt","push","shouldStreakUpdate","updateStreakCounter","update","newStackInfo","toggleStack","id","toggleAddMode","activeState","newActiveState","onSortEnd","oldIndex","newIndex","collection","newstacks","checkIsSameDay","thisDay","thisMonth","thisYear","updateLastLoggedDate","newDate","resetForNewDay","localStorage","setItem","JSON","stringify","populateStateFromStorage","parse","getItem","clearStorage","clear","fullDate","Date","getDate","getMonth","getYear","isSameDay"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\nimport ViewStacks from './Components/ViewStacks';\nimport {arrayMove} from 'react-sortable-hoc';\nimport styled, {createGlobalStyle} from 'styled-components';\n\n/**************\nTO DO\n\n\n!- Refactor stack info into stacks array with helper functions aware of draggablelist lib\n\n- How will dayOfHabit handle habits starting on way later dates? lots of null array items?\n- Ability to add a new stack\n- Ability to rearrange stacks (under info)\n- Add new habits (use formik)\n- stack bar color when all complete\n- Streak counter 'working'\n- 'Edit' button\n\n\n- remove unneeded fonts when style is done\n\nNote:\narray of habits (stacks[]) is separate from array of stack info (stacksInfo[])\ndue to how Sortable library works with arrys not objects. Unless I go into their\nlibrary and make some changes I'm stuck with this setup I believe.\nThis is technical debt that may hurt later.\nhttps://github.com/clauderic/react-sortable-hoc\n\nNote:\nNever figured out importing local font files. Might have something to do with needing\nto add a loader to webpack\n\n**************/\n\nconst AppStyled = styled.div`\n  position:relative;\n  overflow:hidden;\n  width:100%;\n  height: 100%;\n  max-width: 500px;\n  margin: 0 auto;\n  display: block;\n  padding-top: 100px;\n\n  @media(min-width:769px){\n    .App {\n      margin-top: 40px;\n    }\n  }\n`\nconst Typography = createGlobalStyle`\n  @import url('https://fonts.googleapis.com/css?family=Poppins:500,700');\n  @import url('https://fonts.googleapis.com/css?family=Roboto:300i,400,500');\n`;\nconst GlobalStyles = createGlobalStyle`\n  h3, h4 {\n    font-family : 'Poppins';\n    font-weight : 700;\n  }\n  body {\n    font-family: 'Roboto';\n    font-weight: 400;\n    height: 100%;\n  }\n  html {\n    font-size: 16px;\n    overflow: scroll;\n    overflow-x: hidden;\n    height: 100%;\n  }\n  ::-webkit-scrollbar {\n    width: 0px;  /* remove scrollbar space */\n    background: transparent;  /* optional: just make scrollbar invisible */\n  }\n  button {\n      padding: 0; border: none; font: inherit; color: inherit; background-color: transparent;\n      border-radius: 6px;\n      height: 30px;\n      // width:85px;\n      padding-top: 4px;\n      padding-left: 13px;\n      padding-right: 13px;\n      font-family: Poppins;\n      font-weight: 500;\n      font-size: 1rem;\n      color: #3D3D3D;\n      text-align: center;\n      transition: width .2s;\n      -webkit-touch-callout: none; /* iOS Safari */\n      -webkit-user-select: none; /* Chrome/Safari/Opera */\n      -khtml-user-select: none; /* Konqueror */\n      -moz-user-select: none; /* Firefox */\n      -ms-user-select: none; /* Internet Explorer/Edge */\n       user-select: none;\n  }\n  button:focus{\n    outline: none;\n  }\n`;\n\n\n\nclass App extends Component {\n\n\n\n  state = {\n    stacks : [\n      [ //remove this extra array. But also that will break the functions below :'(\n        {\n          action : \"Meditate 15mins\",\n          cue: \"7:00am\",\n          result: \"neutral\",\n          log : [\"\"],\n        },\n        {\n          action:\"Exercise\",\n          cue:\"then\",\n          result: \"neutral\",\n          log : [\"\"],\n        },\n      ],\n    ],\n    stacksInfo : [\n      { name : \"Routine One\", streak: 0, height : \"auto\", },\n    ],\n    date : {\n      lastLoggedDay : null,\n      lastLoggedMonth : null,\n      lastLoggedYear : null,\n      dayOfHabit : 0,\n    },\n    activeStates : {\n      addModeIsActive : false,\n      addModuleIsActive : false,\n      editModeIsActive : false,\n    },\n  };\n\n\n  //HABITS\n  habitResultHandler = (result) => {\n    switch (result){\n      case \"neutral\" :\n        return \"complete\";\n      case \"complete\" :\n        return \"miss\";\n      case \"miss\" :\n        return \"skip\";\n      case \"skip\" :\n        return \"neutral\";\n      default :\n        return \"neutral\";\n    }\n  }\n  habitEasyComplete = (itemId, stackId) => {\n    //turn earlier habits in stack into 'complete' if they're neutral\n\n    const newStack = [...this.state.stacks];\n\n    newStack[stackId] = newStack[stackId].map( (habit, i) => {\n      if (itemId > i && habit.result === \"neutral\"){\n        habit.result = \"complete\";\n        habit.log[this.state.date.dayOfHabit] = \"complete\";\n        return;\n      }\n      return false;\n    });\n\n    //add to habit log\n\n    this.setState({oldStack : newStack})\n  }\n  logHabit = (itemId, stackId) => {\n\n    const newStack = [...this.state.stacks];\n    const result = newStack[stackId][itemId].result; //neutral, complete, miss, etc.\n    const updatedResult = this.habitResultHandler(result); //toggle to next result\n\n    if (updatedResult === \"complete\"){\n      this.habitEasyComplete(itemId, stackId);\n    }\n\n    newStack[stackId][itemId].result = updatedResult;\n\n    //update habit log\n    const log = newStack[stackId][itemId].log;\n    log[this.state.date.dayOfHabit] = updatedResult;\n    newStack[stackId][itemId].log = log;\n\n    this.setState({stacks : newStack})\n    this.updateLocaLStorage();\n\n  }\n  addHabit = (stackId) => {\n\n    const newStack = [...this.state.stacks]\n\n    const activeStates = this.state.activeStates;\n    const newActiveStates = activeStates;\n\n    newActiveStates.addModuleIsActive = true;\n    this.setState({ activeStates : newActiveStates })\n\n    let cue = prompt(\"Cue : \");\n    let action = prompt(\"Action : \");\n    newStack[stackId].push(\n      {\n        action : action,\n        cue: cue,\n        result: \"neutral\",\n        log : [],\n      }\n    )\n\n    this.setState({stacks : newStack})\n    this.updateLocaLStorage();\n  }\n\n\n  //STREAKS\n  shouldStreakUpdate = () => {\n\n  }\n  updateStreakCounter = (stackId, update) => {\n    let newStackInfo = {...this.state.stacksInfo};\n\n    if (update === \"failed\"){\n      newStackInfo[stackId].streak --;\n    }\n    if (update === \"completed\"){\n      newStackInfo[stackId].streak ++;\n    }\n\n    this.setState({stacksInfo : newStackInfo})\n  }\n\n\n  //OTHER\n  toggleStack = (id) => {\n    let toggleStack = this.state.stacksInfo[id];\n    let newStack = toggleStack;\n\n    newStack.height = toggleStack.height === 0 ? 'auto' : 0;\n\n    this.setState({\n      toggleStack : newStack\n    })\n  }\n  toggleAddMode = () => {\n    const activeState = this.state.activeStates;\n    const newActiveState = activeState;\n    newActiveState.addModeIsActive = !activeState.addModeIsActive;\n    this.setState({ activeState : newActiveState})\n  }\n  onSortEnd = ({oldIndex, newIndex, collection}) => {\n    this.setState(({stacks}) => {\n      const newstacks = [...stacks];\n\n      newstacks[collection] = arrayMove(\n        stacks[collection],\n        oldIndex,\n        newIndex,\n      );\n      return {stacks: newstacks};\n    });\n  };\n\n\n\n  //DAY-RELATED\n  checkIsSameDay = (thisDay, thisMonth, thisYear) => {\n\n    if (this.state.date.lastLoggedDay === null){\n      //first day of using the app!\n      return true;\n    }\n    else if (thisDay !== this.state.date.lastLoggedDay){\n      if (thisMonth === this.state.date.lastLoggedMonth && thisYear === this.state.date.lastLoggedYear){\n        return false;\n      }\n    }\n    else if (thisDay === this.state.date.lastLoggedDay\n      && thisMonth === this.state.date.lastLoggedMonth\n      && thisYear === this.state.date.lastLoggedYear){\n      return true;\n    }\n  }\n  updateLastLoggedDate = (thisDay, thisMonth, thisYear) => {\n\n    let newDate = {...this.state.date};\n    newDate.thisDay = thisDay;\n    newDate.thisMonth= thisMonth;\n    newDate.thisYear = thisYear;\n    newDate.dayOfHabit = newDate.dayOfHabit + 1;\n\n    this.setState({date : newDate});\n  }\n  resetForNewDay = () => {\n\n    let newDate = {...this.state.date};\n    newDate.dayOfHabit = newDate.dayOfHabit + 1;\n\n    let stacks = [...this.state.stacks];\n    stacks[0].map( habit => {\n      habit.result = \"neutral\"\n    })\n\n    this.setState({ date : newDate })\n  }\n\n\n  //STORAGE\n  updateLocaLStorage = () => {\n      //should be called whenever a habit is logged asap, in case the users\n      //then immediately close the app\n      localStorage.setItem(\"Stacks\", JSON.stringify(this.state.stacks));\n      localStorage.setItem(\"Date\", JSON.stringify(this.state.date));\n  }\n  populateStateFromStorage = () => {\n    //use localStorage to re-populate state when app is refreshed\n    let newStack = JSON.parse(localStorage.getItem('Stacks'));\n    let newDate = JSON.parse(localStorage.getItem('Date'));\n\n    if (newStack) {\n      this.setState({ stacks : newStack})\n    }\n    if (newDate) {\n      this.setState({ date : newDate})\n    }\n  }\n  clearStorage = () => {\n    localStorage.clear();\n\n    //return habit circles to neutral for new day\n    let stacks = [...this.state.stacks];\n    stacks[0].map( habit => {\n      habit.result = \"neutral\"\n    })\n\n  }\n\n  componentDidMount() {\n\n\n    //populate storedHabit in state from localStorage from previous sessions\n    this.populateStateFromStorage();\n\n\n    //get the day\n    let fullDate = new Date();\n    let thisDay = fullDate.getDate();\n    let thisMonth = fullDate.getMonth();\n    let thisYear = fullDate.getYear();\n\n    let isSameDay = this.checkIsSameDay(thisDay, thisMonth, thisYear);\n\n    if (!isSameDay){\n      this.updateLocaLStorage();\n      this.resetForNewDay();\n      this.updateLastLoggedDate(thisDay, thisMonth, thisYear);\n    }\n  }\n\n\n  render() {\n\n\n    return (\n      <AppStyled>\n\n        <Typography />\n        <GlobalStyles />\n\n        <ViewStacks\n          stacks={this.state}\n          stacksInfo={this.state.stacksInfo}\n          day={this.state.date.dayOfHabit}\n          toggleStack={this.toggleStack}\n          logHabit={this.logHabit}\n          onSortEnd={this.onSortEnd}\n          addHabit={this.addHabit}\n          toggleAddMode={this.toggleAddMode}\n          activeStates={this.state.activeStates}\n          nextDay={this.resetForNewDay}\n          clearStorage={this.clearStorage}\n        />\n\n      </AppStyled>\n\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}