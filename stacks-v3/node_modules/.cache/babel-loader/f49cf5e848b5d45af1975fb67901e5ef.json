{"ast":null,"code":"import _toConsumableArray from \"/Users/benreimer/Develop/stacks/stacks-v3/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/benreimer/Develop/stacks/stacks-v3/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/benreimer/Develop/stacks/stacks-v3/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/benreimer/Develop/stacks/stacks-v3/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/benreimer/Develop/stacks/stacks-v3/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/benreimer/Develop/stacks/stacks-v3/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _taggedTemplateLiteral from \"/Users/benreimer/Develop/stacks/stacks-v3/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/Users/benreimer/Develop/stacks/stacks-v3/src/App.js\";\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\n  h3, h4 {\\n    font-family : 'Poppins';\\n    font-weight : 700;\\n  }\\n  body {\\n    font-family: 'Roboto';\\n    font-weight: 400;\\n    height: 100%;\\n  }\\n  html {\\n    font-size: 16px;\\n    overflow: scroll;\\n    overflow-x: hidden;\\n    height: 100%;\\n  }\\n  ::-webkit-scrollbar {\\n    width: 0px;  /* remove scrollbar space */\\n    background: transparent;  /* optional: just make scrollbar invisible */\\n  }\\n  button {\\n      padding: 0; border: none; font: inherit; color: inherit; background-color: transparent;\\n      border-radius: 6px;\\n      height: 30px;\\n      // width:85px;\\n      padding-top: 4px;\\n      padding-left: 13px;\\n      padding-right: 13px;\\n      font-family: Poppins;\\n      font-weight: 500;\\n      font-size: 1rem;\\n      color: #3D3D3D;\\n      text-align: center;\\n      transition: width .2s;\\n      -webkit-touch-callout: none; /* iOS Safari */\\n      -webkit-user-select: none; /* Chrome/Safari/Opera */\\n      -khtml-user-select: none; /* Konqueror */\\n      -moz-user-select: none; /* Firefox */\\n      -ms-user-select: none; /* Internet Explorer/Edge */\\n       user-select: none;\\n  }\\n  button:focus{\\n    outline: none;\\n  }\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n  @import url('https://fonts.googleapis.com/css?family=Poppins:500,700');\\n  @import url('https://fonts.googleapis.com/css?family=Roboto:300i,400,500');\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  position:relative;\\n  overflow:hidden;\\n  width:100%;\\n  height: 100%;\\n  max-width: 500px;\\n  margin: 0 auto;\\n  display: block;\\n  padding-top: 100px;\\n\\n  @media(min-width:769px){\\n    .App {\\n      margin-top: 40px;\\n    }\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { Component } from 'react';\nimport './App.css';\nimport ViewStacks from './Components/ViewStacks';\nimport { arrayMove } from 'react-sortable-hoc';\nimport styled, { createGlobalStyle } from 'styled-components';\n/**************\nTO DO\n\n\n!- See if you can refactor state so stack info is in the same overall item as stacks.\nMaybe adding in an extra layer of array for sortable lib is all that is needed?\n\n\n- Ability to Add a new stack\n- Ability to rearrange stacks\n- Add new habits\n- toggle animation\n- stack bar color when all complete\n- Streak counter 'working'\n- 'Edit' button\n\n\n- remove unneeded fonts when style is done\n\nNote:\narray of habits (stacks[]) is separate from array of stack info (stacksInfo[])\ndue to how Sortable library works with arrys not objects. Unless I go into their\nlibrary and make some changes I'm stuck with this setup I believe.\nThis is technical debt that may hurt later.\nhttps://github.com/clauderic/react-sortable-hoc\n\nNote:\nNever figured out importing local font files. Might have something to do with needing\nto add a loader to webpack\n\n**************/\n\nvar AppStyled = styled.div(_templateObject());\nvar Typography = createGlobalStyle(_templateObject2());\nvar GlobalStyles = createGlobalStyle(_templateObject3());\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, App);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(App)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      stacks: [[//remove this extra array lol. But also that will break everything :'(\n      {\n        action: \"Meditate 15mins\",\n        cue: \"7:00am\",\n        result: \"neutral\",\n        log: [\"\"]\n      }, {\n        action: \"Exercise\",\n        cue: \"then\",\n        result: \"neutral\",\n        log: [\"hi\"]\n      }]],\n      stacksInfo: [{\n        name: \"Routine One\",\n        streak: 0,\n        height: \"auto\"\n      }],\n      lastLoggedDate: null,\n      lastLoggedMonth: null,\n      lastLoggedYear: null,\n      lastLoggedMin: null,\n      dayOfHabit: 0,\n      activeStates: {\n        addModeIsActive: false,\n        addModuleIsActive: false,\n        editModeIsActive: false\n      }\n    };\n\n    _this.habitResultHandler = function (result) {\n      switch (result) {\n        case \"neutral\":\n          return \"complete\";\n\n        case \"complete\":\n          return \"miss\";\n\n        case \"miss\":\n          return \"skip\";\n\n        case \"skip\":\n          return \"neutral\";\n\n        default:\n          return \"neutral\";\n      }\n    };\n\n    _this.habitEasyComplete = function (itemId, stackId) {\n      //turn earlier habits in stack into 'complete' if they're neutral\n      var newStack = _toConsumableArray(_this.state.stacks);\n\n      newStack[stackId] = newStack[stackId].map(function (habit, i) {\n        if (itemId > i && habit.result === \"neutral\") {\n          return habit.result = \"complete\";\n        }\n\n        return false;\n      });\n\n      _this.setState({\n        oldStack: newStack\n      });\n    };\n\n    _this.logHabit = function (itemId, stackId) {\n      var newStack = _toConsumableArray(_this.state.stacks);\n\n      var result = newStack[stackId][itemId].result;\n\n      var updatedResult = _this.habitResultHandler(result); //toggle through results\n\n\n      if (updatedResult === \"complete\") {\n        //see if the easy complete is used\n        _this.habitEasyComplete(itemId, stackId);\n      }\n\n      newStack[stackId][itemId].result = updatedResult; //add to habit log\n\n      var log = newStack[stackId][itemId].log;\n      log[_this.state.dayOfHabit] = updatedResult;\n      newStack[stackId][itemId].log = log;\n      console.log(\"log is : \", log);\n\n      _this.setState({\n        stacks: newStack\n      });\n\n      _this.updateLocaLStorage(newStack);\n    };\n\n    _this.addHabit = function (stackId) {\n      var newStack = _toConsumableArray(_this.state.stacks);\n\n      var activeStates = _this.state.activeStates;\n      var newActiveStates = activeStates;\n      newActiveStates.addModuleIsActive = true;\n\n      _this.setState({\n        activeStates: newActiveStates\n      });\n\n      var cue = prompt(\"Cue : \");\n      var action = prompt(\"Action : \");\n      newStack[stackId].push({\n        action: action,\n        cue: cue,\n        result: \"neutral\",\n        log: []\n      });\n\n      _this.setState({\n        stacks: newStack\n      });\n\n      _this.updateLocaLStorage(newStack);\n    };\n\n    _this.onSortEnd = function (_ref) {\n      var oldIndex = _ref.oldIndex,\n          newIndex = _ref.newIndex,\n          collection = _ref.collection;\n\n      _this.setState(function (_ref2) {\n        var stacks = _ref2.stacks;\n\n        var newstacks = _toConsumableArray(stacks);\n\n        newstacks[collection] = arrayMove(stacks[collection], oldIndex, newIndex);\n        return {\n          stacks: newstacks\n        };\n      });\n    };\n\n    _this.toggleStack = function (id) {\n      var toggleStack = _this.state.stacksInfo[id];\n      var newStack = toggleStack;\n      newStack.height = toggleStack.height === 0 ? 'auto' : 0;\n\n      _this.setState({\n        toggleStack: newStack\n      });\n    };\n\n    _this.toggleAddMode = function () {\n      var activeState = _this.state.activeStates;\n      var newActiveState = activeState;\n      newActiveState.addModeIsActive = !activeState.addModeIsActive;\n\n      _this.setState({\n        activeState: newActiveState\n      });\n    };\n\n    _this.checkIsSameDay = function (thisDay, thisMonth, thisYear, thisMin) {\n      if (_this.state.lastLoggedDate === null) {\n        //first day of using the app!\n        return true;\n      } else if (thisDay !== _this.state.lastLoggedDate && thisMonth !== _this.state.lastLoggedMonth && thisYear !== _this.state.lastLoggedYear) {\n        //new day!\n        return false;\n      } else if (thisDay === _this.state.lastLoggedDate && thisMonth === _this.state.lastLoggedMonth && thisYear === _this.state.lastLoggedYear) {\n        // same day!\n        return true;\n      }\n    };\n\n    _this.updateLastLoggedDate = function (thisDay, thisMonth, thisYear) {\n      var dayOfHabit = _this.state.dayOfHabit;\n      var nextDayOfHabit = dayOfHabit + 1;\n\n      _this.setState({\n        lastLoggedDate: thisDay\n      });\n\n      _this.setState({\n        lastLoggedMonth: thisMonth\n      });\n\n      _this.setState({\n        lastLoggedYear: thisYear\n      });\n\n      _this.setState({\n        dayOfHabit: nextDayOfHabit\n      });\n    };\n\n    _this.nextDay = function () {\n      var day = _this.state.dayOfHabit;\n      day++; //return habit circles to neutral for new day\n\n      var stacks = _toConsumableArray(_this.state.stacks);\n\n      stacks[0].map(function (habit) {\n        habit.result = \"neutral\";\n      });\n\n      _this.setState({\n        dayOfHabit: day\n      });\n    };\n\n    _this.updateLocaLStorage = function (newStack) {\n      //should be called whenever a habit is logged asap, in case the users\n      //then immediately close the app\n      localStorage.setItem(\"Stacks\", JSON.stringify(newStack));\n    };\n\n    _this.populateStateFromStorage = function () {\n      //use localStorage to re-populate state when app is refreshed\n      var newStack = JSON.parse(localStorage.getItem('Stacks'));\n\n      if (newStack) {\n        _this.setState({\n          stacks: newStack\n        });\n      }\n    };\n\n    _this.clearStorage = function () {\n      localStorage.clear();\n      console.log(\"local Storage cleared\");\n    };\n\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      //populate storedHabit in state from localStorage from previous sessions\n      this.populateStateFromStorage(); //get the day\n\n      var fullDate = new Date();\n      var thisMin = fullDate.getMinute();\n      var thisDay = fullDate.getDate();\n      var thisMonth = fullDate.getMonth();\n      var thisYear = fullDate.getYear();\n      var isSameDay = this.checkIsSameDay(thisDay, thisMonth, thisYear, thisMin);\n\n      if (!isSameDay) {\n        this.nextDay();\n        this.updateLastLoggedDate(thisDay, thisMonth, thisYear, thisMin);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(AppStyled, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 346\n        },\n        __self: this\n      }, React.createElement(Typography, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 348\n        },\n        __self: this\n      }), React.createElement(GlobalStyles, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 349\n        },\n        __self: this\n      }), React.createElement(ViewStacks, {\n        stacks: this.state,\n        stacksInfo: this.state.stacksInfo,\n        day: this.state.dayOfHabit,\n        toggleStack: this.toggleStack,\n        logHabit: this.logHabit,\n        onSortEnd: this.onSortEnd,\n        addHabit: this.addHabit,\n        toggleAddMode: this.toggleAddMode,\n        activeStates: this.state.activeStates,\n        nextDay: this.nextDay,\n        clearStorage: this.clearStorage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 351\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["/Users/benreimer/Develop/stacks/stacks-v3/src/App.js"],"names":["React","Component","ViewStacks","arrayMove","styled","createGlobalStyle","AppStyled","div","Typography","GlobalStyles","App","state","stacks","action","cue","result","log","stacksInfo","name","streak","height","lastLoggedDate","lastLoggedMonth","lastLoggedYear","lastLoggedMin","dayOfHabit","activeStates","addModeIsActive","addModuleIsActive","editModeIsActive","habitResultHandler","habitEasyComplete","itemId","stackId","newStack","map","habit","i","setState","oldStack","logHabit","updatedResult","console","updateLocaLStorage","addHabit","newActiveStates","prompt","push","onSortEnd","oldIndex","newIndex","collection","newstacks","toggleStack","id","toggleAddMode","activeState","newActiveState","checkIsSameDay","thisDay","thisMonth","thisYear","thisMin","updateLastLoggedDate","nextDayOfHabit","nextDay","day","localStorage","setItem","JSON","stringify","populateStateFromStorage","parse","getItem","clearStorage","clear","fullDate","Date","getMinute","getDate","getMonth","getYear","isSameDay"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAO,WAAP;AACA,OAAOC,UAAP,MAAuB,yBAAvB;AACA,SAAQC,SAAR,QAAwB,oBAAxB;AACA,OAAOC,MAAP,IAAgBC,iBAAhB,QAAwC,mBAAxC;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgCA,IAAMC,SAAS,GAAGF,MAAM,CAACG,GAAV,mBAAf;AAgBA,IAAMC,UAAU,GAAGH,iBAAH,oBAAhB;AAIA,IAAMI,YAAY,GAAGJ,iBAAH,oBAAlB;;IAgDMK,G;;;;;;;;;;;;;;;;;UAIJC,K,GAAQ;AACNC,MAAAA,MAAM,EAAG,CACP,CAAE;AACA;AACEC,QAAAA,MAAM,EAAG,iBADX;AAEEC,QAAAA,GAAG,EAAE,QAFP;AAGEC,QAAAA,MAAM,EAAE,SAHV;AAIEC,QAAAA,GAAG,EAAG,CAAC,EAAD;AAJR,OADF,EAOE;AACEH,QAAAA,MAAM,EAAC,UADT;AAEEC,QAAAA,GAAG,EAAC,MAFN;AAGEC,QAAAA,MAAM,EAAE,SAHV;AAIEC,QAAAA,GAAG,EAAG,CAAC,IAAD;AAJR,OAPF,CADO,CADH;AAiBNC,MAAAA,UAAU,EAAG,CACX;AAAEC,QAAAA,IAAI,EAAG,aAAT;AAAwBC,QAAAA,MAAM,EAAE,CAAhC;AAAmCC,QAAAA,MAAM,EAAG;AAA5C,OADW,CAjBP;AAoBNC,MAAAA,cAAc,EAAG,IApBX;AAqBNC,MAAAA,eAAe,EAAG,IArBZ;AAsBNC,MAAAA,cAAc,EAAG,IAtBX;AAuBNC,MAAAA,aAAa,EAAG,IAvBV;AAwBNC,MAAAA,UAAU,EAAG,CAxBP;AAyBNC,MAAAA,YAAY,EAAG;AACbC,QAAAA,eAAe,EAAG,KADL;AAEbC,QAAAA,iBAAiB,EAAG,KAFP;AAGbC,QAAAA,gBAAgB,EAAG;AAHN;AAzBT,K;;UAqCRC,kB,GAAqB,UAACf,MAAD,EAAY;AAC/B,cAAQA,MAAR;AACE,aAAK,SAAL;AACE,iBAAO,UAAP;;AACF,aAAK,UAAL;AACE,iBAAO,MAAP;;AACF,aAAK,MAAL;AACE,iBAAO,MAAP;;AACF,aAAK,MAAL;AACE,iBAAO,SAAP;;AACF;AACE,iBAAO,SAAP;AAVJ;AAYD,K;;UACDgB,iB,GAAoB,UAACC,MAAD,EAASC,OAAT,EAAqB;AACvC;AAEA,UAAMC,QAAQ,sBAAO,MAAKvB,KAAL,CAAWC,MAAlB,CAAd;;AAEAsB,MAAAA,QAAQ,CAACD,OAAD,CAAR,GAAoBC,QAAQ,CAACD,OAAD,CAAR,CAAkBE,GAAlB,CAAuB,UAACC,KAAD,EAAQC,CAAR,EAAc;AACvD,YAAIL,MAAM,GAAGK,CAAT,IAAcD,KAAK,CAACrB,MAAN,KAAgB,SAAlC,EAA4C;AAC1C,iBAAOqB,KAAK,CAACrB,MAAN,GAAe,UAAtB;AACD;;AACD,eAAO,KAAP;AACD,OALmB,CAApB;;AAOA,YAAKuB,QAAL,CAAc;AAACC,QAAAA,QAAQ,EAAGL;AAAZ,OAAd;AACD,K;;UACDM,Q,GAAW,UAACR,MAAD,EAASC,OAAT,EAAqB;AAE9B,UAAMC,QAAQ,sBAAO,MAAKvB,KAAL,CAAWC,MAAlB,CAAd;;AACA,UAAMG,MAAM,GAAGmB,QAAQ,CAACD,OAAD,CAAR,CAAkBD,MAAlB,EAA0BjB,MAAzC;;AACA,UAAM0B,aAAa,GAAG,MAAKX,kBAAL,CAAwBf,MAAxB,CAAtB,CAJ8B,CAIyB;;;AAEvD,UAAI0B,aAAa,KAAK,UAAtB,EAAiC;AAC/B;AACA,cAAKV,iBAAL,CAAuBC,MAAvB,EAA+BC,OAA/B;AACD;;AAEDC,MAAAA,QAAQ,CAACD,OAAD,CAAR,CAAkBD,MAAlB,EAA0BjB,MAA1B,GAAmC0B,aAAnC,CAX8B,CAa9B;;AACA,UAAMzB,GAAG,GAAGkB,QAAQ,CAACD,OAAD,CAAR,CAAkBD,MAAlB,EAA0BhB,GAAtC;AACAA,MAAAA,GAAG,CAAC,MAAKL,KAAL,CAAWc,UAAZ,CAAH,GAA6BgB,aAA7B;AACAP,MAAAA,QAAQ,CAACD,OAAD,CAAR,CAAkBD,MAAlB,EAA0BhB,GAA1B,GAAgCA,GAAhC;AACA0B,MAAAA,OAAO,CAAC1B,GAAR,CAAY,WAAZ,EAAyBA,GAAzB;;AAEA,YAAKsB,QAAL,CAAc;AAAC1B,QAAAA,MAAM,EAAGsB;AAAV,OAAd;;AACA,YAAKS,kBAAL,CAAwBT,QAAxB;AAED,K;;UACDU,Q,GAAW,UAACX,OAAD,EAAa;AAEtB,UAAMC,QAAQ,sBAAO,MAAKvB,KAAL,CAAWC,MAAlB,CAAd;;AAEA,UAAMc,YAAY,GAAG,MAAKf,KAAL,CAAWe,YAAhC;AACA,UAAMmB,eAAe,GAAGnB,YAAxB;AAEAmB,MAAAA,eAAe,CAACjB,iBAAhB,GAAoC,IAApC;;AACA,YAAKU,QAAL,CAAc;AAAEZ,QAAAA,YAAY,EAAGmB;AAAjB,OAAd;;AAEA,UAAI/B,GAAG,GAAGgC,MAAM,CAAC,QAAD,CAAhB;AACA,UAAIjC,MAAM,GAAGiC,MAAM,CAAC,WAAD,CAAnB;AACAZ,MAAAA,QAAQ,CAACD,OAAD,CAAR,CAAkBc,IAAlB,CACE;AACElC,QAAAA,MAAM,EAAGA,MADX;AAEEC,QAAAA,GAAG,EAAEA,GAFP;AAGEC,QAAAA,MAAM,EAAE,SAHV;AAIEC,QAAAA,GAAG,EAAG;AAJR,OADF;;AASA,YAAKsB,QAAL,CAAc;AAAC1B,QAAAA,MAAM,EAAGsB;AAAV,OAAd;;AACA,YAAKS,kBAAL,CAAwBT,QAAxB;AACD,K;;UAGDc,S,GAAY,gBAAsC;AAAA,UAApCC,QAAoC,QAApCA,QAAoC;AAAA,UAA1BC,QAA0B,QAA1BA,QAA0B;AAAA,UAAhBC,UAAgB,QAAhBA,UAAgB;;AAChD,YAAKb,QAAL,CAAc,iBAAc;AAAA,YAAZ1B,MAAY,SAAZA,MAAY;;AAC1B,YAAMwC,SAAS,sBAAOxC,MAAP,CAAf;;AAEAwC,QAAAA,SAAS,CAACD,UAAD,CAAT,GAAwBhD,SAAS,CAC/BS,MAAM,CAACuC,UAAD,CADyB,EAE/BF,QAF+B,EAG/BC,QAH+B,CAAjC;AAKA,eAAO;AAACtC,UAAAA,MAAM,EAAEwC;AAAT,SAAP;AACD,OATD;AAUD,K;;UAGDC,W,GAAc,UAACC,EAAD,EAAQ;AACpB,UAAID,WAAW,GAAG,MAAK1C,KAAL,CAAWM,UAAX,CAAsBqC,EAAtB,CAAlB;AACA,UAAIpB,QAAQ,GAAGmB,WAAf;AAEAnB,MAAAA,QAAQ,CAACd,MAAT,GAAkBiC,WAAW,CAACjC,MAAZ,KAAuB,CAAvB,GAA2B,MAA3B,GAAoC,CAAtD;;AAEA,YAAKkB,QAAL,CAAc;AACZe,QAAAA,WAAW,EAAGnB;AADF,OAAd;AAGD,K;;UACDqB,a,GAAgB,YAAM;AACpB,UAAMC,WAAW,GAAG,MAAK7C,KAAL,CAAWe,YAA/B;AACA,UAAM+B,cAAc,GAAGD,WAAvB;AACAC,MAAAA,cAAc,CAAC9B,eAAf,GAAiC,CAAC6B,WAAW,CAAC7B,eAA9C;;AACA,YAAKW,QAAL,CAAc;AAAEkB,QAAAA,WAAW,EAAGC;AAAhB,OAAd;AACD,K;;UAGDC,c,GAAiB,UAACC,OAAD,EAAUC,SAAV,EAAqBC,QAArB,EAA+BC,OAA/B,EAA2C;AAE1D,UAAI,MAAKnD,KAAL,CAAWU,cAAX,KAA8B,IAAlC,EAAuC;AACrC;AACA,eAAO,IAAP;AACD,OAHD,MAIK,IAAIsC,OAAO,KAAK,MAAKhD,KAAL,CAAWU,cAAvB,IACFuC,SAAS,KAAK,MAAKjD,KAAL,CAAWW,eADvB,IAEFuC,QAAQ,KAAK,MAAKlD,KAAL,CAAWY,cAF1B,EAEyC;AAC5C;AACA,eAAO,KAAP;AACD,OALI,MAMA,IAAIoC,OAAO,KAAK,MAAKhD,KAAL,CAAWU,cAAvB,IACJuC,SAAS,KAAK,MAAKjD,KAAL,CAAWW,eADrB,IAEJuC,QAAQ,KAAK,MAAKlD,KAAL,CAAWY,cAFxB,EAEuC;AAC1C;AACA,eAAO,IAAP;AACD;AACF,K;;UACDwC,oB,GAAuB,UAACJ,OAAD,EAAUC,SAAV,EAAqBC,QAArB,EAAkC;AAEvD,UAAIpC,UAAU,GAAG,MAAKd,KAAL,CAAWc,UAA5B;AACA,UAAIuC,cAAc,GAAGvC,UAAU,GAAG,CAAlC;;AAEA,YAAKa,QAAL,CAAc;AAACjB,QAAAA,cAAc,EAAGsC;AAAlB,OAAd;;AACA,YAAKrB,QAAL,CAAc;AAAChB,QAAAA,eAAe,EAAGsC;AAAnB,OAAd;;AACA,YAAKtB,QAAL,CAAc;AAACf,QAAAA,cAAc,EAAGsC;AAAlB,OAAd;;AACA,YAAKvB,QAAL,CAAc;AAACb,QAAAA,UAAU,EAAGuC;AAAd,OAAd;AACD,K;;UACDC,O,GAAU,YAAM;AACd,UAAIC,GAAG,GAAG,MAAKvD,KAAL,CAAWc,UAArB;AACAyC,MAAAA,GAAG,GAFW,CAId;;AACA,UAAItD,MAAM,sBAAO,MAAKD,KAAL,CAAWC,MAAlB,CAAV;;AACAA,MAAAA,MAAM,CAAC,CAAD,CAAN,CAAUuB,GAAV,CAAe,UAAAC,KAAK,EAAI;AACtBA,QAAAA,KAAK,CAACrB,MAAN,GAAe,SAAf;AACD,OAFD;;AAIA,YAAKuB,QAAL,CAAc;AAAEb,QAAAA,UAAU,EAAGyC;AAAf,OAAd;AACD,K;;UAIDvB,kB,GAAqB,UAACT,QAAD,EAAc;AAC/B;AACA;AACAiC,MAAAA,YAAY,CAACC,OAAb,CAAqB,QAArB,EAA+BC,IAAI,CAACC,SAAL,CAAepC,QAAf,CAA/B;AACH,K;;UACDqC,wB,GAA2B,YAAM;AAC/B;AACA,UAAIrC,QAAQ,GAAGmC,IAAI,CAACG,KAAL,CAAWL,YAAY,CAACM,OAAb,CAAqB,QAArB,CAAX,CAAf;;AAEA,UAAIvC,QAAJ,EAAc;AACZ,cAAKI,QAAL,CAAc;AAAE1B,UAAAA,MAAM,EAAGsB;AAAX,SAAd;AACD;AACF,K;;UACDwC,Y,GAAe,YAAM;AACnBP,MAAAA,YAAY,CAACQ,KAAb;AACAjC,MAAAA,OAAO,CAAC1B,GAAR,CAAY,uBAAZ;AACD,K;;;;;;;wCAEmB;AAElB;AACA,WAAKuD,wBAAL,GAHkB,CAMlB;;AACA,UAAIK,QAAQ,GAAG,IAAIC,IAAJ,EAAf;AACA,UAAIf,OAAO,GAAGc,QAAQ,CAACE,SAAT,EAAd;AACA,UAAInB,OAAO,GAAGiB,QAAQ,CAACG,OAAT,EAAd;AACA,UAAInB,SAAS,GAAGgB,QAAQ,CAACI,QAAT,EAAhB;AACA,UAAInB,QAAQ,GAAGe,QAAQ,CAACK,OAAT,EAAf;AACA,UAAIC,SAAS,GAAG,KAAKxB,cAAL,CAAoBC,OAApB,EAA6BC,SAA7B,EAAwCC,QAAxC,EAAkDC,OAAlD,CAAhB;;AAEA,UAAI,CAACoB,SAAL,EAAe;AACb,aAAKjB,OAAL;AACA,aAAKF,oBAAL,CAA0BJ,OAA1B,EAAmCC,SAAnC,EAA8CC,QAA9C,EAAwDC,OAAxD;AACD;AACF;;;6BAKQ;AAGP,aACE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAEE,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,EAGE,oBAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAHF,EAKE,oBAAC,UAAD;AACE,QAAA,MAAM,EAAE,KAAKnD,KADf;AAEE,QAAA,UAAU,EAAE,KAAKA,KAAL,CAAWM,UAFzB;AAGE,QAAA,GAAG,EAAE,KAAKN,KAAL,CAAWc,UAHlB;AAIE,QAAA,WAAW,EAAE,KAAK4B,WAJpB;AAKE,QAAA,QAAQ,EAAE,KAAKb,QALjB;AAME,QAAA,SAAS,EAAE,KAAKQ,SANlB;AAOE,QAAA,QAAQ,EAAE,KAAKJ,QAPjB;AAQE,QAAA,aAAa,EAAE,KAAKW,aARtB;AASE,QAAA,YAAY,EAAE,KAAK5C,KAAL,CAAWe,YAT3B;AAUE,QAAA,OAAO,EAAE,KAAKuC,OAVhB;AAWE,QAAA,YAAY,EAAE,KAAKS,YAXrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QALF,CADF;AAuBD;;;;EArQezE,S;;AAwQlB,eAAeS,GAAf","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\nimport ViewStacks from './Components/ViewStacks';\nimport {arrayMove} from 'react-sortable-hoc';\nimport styled, {createGlobalStyle} from 'styled-components';\n\n/**************\nTO DO\n\n\n!- See if you can refactor state so stack info is in the same overall item as stacks.\nMaybe adding in an extra layer of array for sortable lib is all that is needed?\n\n\n- Ability to Add a new stack\n- Ability to rearrange stacks\n- Add new habits\n- toggle animation\n- stack bar color when all complete\n- Streak counter 'working'\n- 'Edit' button\n\n\n- remove unneeded fonts when style is done\n\nNote:\narray of habits (stacks[]) is separate from array of stack info (stacksInfo[])\ndue to how Sortable library works with arrys not objects. Unless I go into their\nlibrary and make some changes I'm stuck with this setup I believe.\nThis is technical debt that may hurt later.\nhttps://github.com/clauderic/react-sortable-hoc\n\nNote:\nNever figured out importing local font files. Might have something to do with needing\nto add a loader to webpack\n\n**************/\n\nconst AppStyled = styled.div`\n  position:relative;\n  overflow:hidden;\n  width:100%;\n  height: 100%;\n  max-width: 500px;\n  margin: 0 auto;\n  display: block;\n  padding-top: 100px;\n\n  @media(min-width:769px){\n    .App {\n      margin-top: 40px;\n    }\n  }\n`\nconst Typography = createGlobalStyle`\n  @import url('https://fonts.googleapis.com/css?family=Poppins:500,700');\n  @import url('https://fonts.googleapis.com/css?family=Roboto:300i,400,500');\n`;\nconst GlobalStyles = createGlobalStyle`\n  h3, h4 {\n    font-family : 'Poppins';\n    font-weight : 700;\n  }\n  body {\n    font-family: 'Roboto';\n    font-weight: 400;\n    height: 100%;\n  }\n  html {\n    font-size: 16px;\n    overflow: scroll;\n    overflow-x: hidden;\n    height: 100%;\n  }\n  ::-webkit-scrollbar {\n    width: 0px;  /* remove scrollbar space */\n    background: transparent;  /* optional: just make scrollbar invisible */\n  }\n  button {\n      padding: 0; border: none; font: inherit; color: inherit; background-color: transparent;\n      border-radius: 6px;\n      height: 30px;\n      // width:85px;\n      padding-top: 4px;\n      padding-left: 13px;\n      padding-right: 13px;\n      font-family: Poppins;\n      font-weight: 500;\n      font-size: 1rem;\n      color: #3D3D3D;\n      text-align: center;\n      transition: width .2s;\n      -webkit-touch-callout: none; /* iOS Safari */\n      -webkit-user-select: none; /* Chrome/Safari/Opera */\n      -khtml-user-select: none; /* Konqueror */\n      -moz-user-select: none; /* Firefox */\n      -ms-user-select: none; /* Internet Explorer/Edge */\n       user-select: none;\n  }\n  button:focus{\n    outline: none;\n  }\n`;\n\n\n\nclass App extends Component {\n\n\n\n  state = {\n    stacks : [\n      [ //remove this extra array lol. But also that will break everything :'(\n        {\n          action : \"Meditate 15mins\",\n          cue: \"7:00am\",\n          result: \"neutral\",\n          log : [\"\"],\n        },\n        {\n          action:\"Exercise\",\n          cue:\"then\",\n          result: \"neutral\",\n          log : [\"hi\"],\n        },\n      ],\n    ],\n    stacksInfo : [\n      { name : \"Routine One\", streak: 0, height : \"auto\", },\n    ],\n    lastLoggedDate : null,\n    lastLoggedMonth : null,\n    lastLoggedYear : null,\n    lastLoggedMin : null,\n    dayOfHabit : 0,\n    activeStates : {\n      addModeIsActive : false,\n      addModuleIsActive : false,\n      editModeIsActive : false,\n    },\n  };\n\n\n\n\n\n  //HABITS\n  habitResultHandler = (result) => {\n    switch (result){\n      case \"neutral\" :\n        return \"complete\";\n      case \"complete\" :\n        return \"miss\";\n      case \"miss\" :\n        return \"skip\";\n      case \"skip\" :\n        return \"neutral\";\n      default :\n        return \"neutral\";\n    }\n  }\n  habitEasyComplete = (itemId, stackId) => {\n    //turn earlier habits in stack into 'complete' if they're neutral\n\n    const newStack = [...this.state.stacks];\n\n    newStack[stackId] = newStack[stackId].map( (habit, i) => {\n      if (itemId > i && habit.result ===\"neutral\"){\n        return habit.result = \"complete\";\n      }\n      return false;\n    });\n\n    this.setState({oldStack : newStack})\n  }\n  logHabit = (itemId, stackId) => {\n\n    const newStack = [...this.state.stacks];\n    const result = newStack[stackId][itemId].result;\n    const updatedResult = this.habitResultHandler(result); //toggle through results\n\n    if (updatedResult === \"complete\"){\n      //see if the easy complete is used\n      this.habitEasyComplete(itemId, stackId);\n    }\n\n    newStack[stackId][itemId].result = updatedResult;\n\n    //add to habit log\n    const log = newStack[stackId][itemId].log;\n    log[this.state.dayOfHabit] = updatedResult;\n    newStack[stackId][itemId].log = log;\n    console.log(\"log is : \", log);\n\n    this.setState({stacks : newStack})\n    this.updateLocaLStorage(newStack);\n\n  }\n  addHabit = (stackId) => {\n\n    const newStack = [...this.state.stacks]\n\n    const activeStates = this.state.activeStates;\n    const newActiveStates = activeStates;\n\n    newActiveStates.addModuleIsActive = true;\n    this.setState({ activeStates : newActiveStates })\n\n    let cue = prompt(\"Cue : \");\n    let action = prompt(\"Action : \");\n    newStack[stackId].push(\n      {\n        action : action,\n        cue: cue,\n        result: \"neutral\",\n        log : [],\n      }\n    )\n\n    this.setState({stacks : newStack})\n    this.updateLocaLStorage(newStack);\n  }\n\n  //dragging habits in new order\n  onSortEnd = ({oldIndex, newIndex, collection}) => {\n    this.setState(({stacks}) => {\n      const newstacks = [...stacks];\n\n      newstacks[collection] = arrayMove(\n        stacks[collection],\n        oldIndex,\n        newIndex,\n      );\n      return {stacks: newstacks};\n    });\n  };\n\n  //OTHER\n  toggleStack = (id) => {\n    let toggleStack = this.state.stacksInfo[id];\n    let newStack = toggleStack;\n\n    newStack.height = toggleStack.height === 0 ? 'auto' : 0;\n\n    this.setState({\n      toggleStack : newStack\n    })\n  }\n  toggleAddMode = () => {\n    const activeState = this.state.activeStates;\n    const newActiveState = activeState;\n    newActiveState.addModeIsActive = !activeState.addModeIsActive;\n    this.setState({ activeState : newActiveState})\n  }\n\n  //DAY-RELATED\n  checkIsSameDay = (thisDay, thisMonth, thisYear, thisMin) => {\n\n    if (this.state.lastLoggedDate === null){\n      //first day of using the app!\n      return true;\n    }\n    else if (thisDay !== this.state.lastLoggedDate\n        && thisMonth !== this.state.lastLoggedMonth\n        && thisYear !== this.state.lastLoggedYear){\n      //new day!\n      return false;\n    }\n    else if (thisDay === this.state.lastLoggedDate\n      && thisMonth === this.state.lastLoggedMonth\n      && thisYear === this.state.lastLoggedYear){\n      // same day!\n      return true;\n    }\n  }\n  updateLastLoggedDate = (thisDay, thisMonth, thisYear) => {\n\n    let dayOfHabit = this.state.dayOfHabit;\n    let nextDayOfHabit = dayOfHabit + 1;\n\n    this.setState({lastLoggedDate : thisDay});\n    this.setState({lastLoggedMonth : thisMonth});\n    this.setState({lastLoggedYear : thisYear});\n    this.setState({dayOfHabit : nextDayOfHabit});\n  }\n  nextDay = () => {\n    let day = this.state.dayOfHabit;\n    day++;\n\n    //return habit circles to neutral for new day\n    let stacks = [...this.state.stacks];\n    stacks[0].map( habit => {\n      habit.result = \"neutral\"\n    })\n\n    this.setState({ dayOfHabit : day })\n  }\n\n\n  //STORAGE\n  updateLocaLStorage = (newStack) => {\n      //should be called whenever a habit is logged asap, in case the users\n      //then immediately close the app\n      localStorage.setItem(\"Stacks\", JSON.stringify(newStack));\n  }\n  populateStateFromStorage = () => {\n    //use localStorage to re-populate state when app is refreshed\n    let newStack = JSON.parse(localStorage.getItem('Stacks'));\n\n    if (newStack) {\n      this.setState({ stacks : newStack})\n    }\n  }\n  clearStorage = () => {\n    localStorage.clear();\n    console.log(\"local Storage cleared\");\n  }\n\n  componentDidMount() {\n\n    //populate storedHabit in state from localStorage from previous sessions\n    this.populateStateFromStorage();\n\n\n    //get the day\n    let fullDate = new Date();\n    let thisMin = fullDate.getMinute();\n    let thisDay = fullDate.getDate();\n    let thisMonth = fullDate.getMonth();\n    let thisYear = fullDate.getYear();\n    let isSameDay = this.checkIsSameDay(thisDay, thisMonth, thisYear, thisMin);\n\n    if (!isSameDay){\n      this.nextDay();\n      this.updateLastLoggedDate(thisDay, thisMonth, thisYear, thisMin);\n    }\n  }\n\n\n\n\n  render() {\n\n\n    return (\n      <AppStyled>\n\n        <Typography />\n        <GlobalStyles />\n\n        <ViewStacks\n          stacks={this.state}\n          stacksInfo={this.state.stacksInfo}\n          day={this.state.dayOfHabit}\n          toggleStack={this.toggleStack}\n          logHabit={this.logHabit}\n          onSortEnd={this.onSortEnd}\n          addHabit={this.addHabit}\n          toggleAddMode={this.toggleAddMode}\n          activeStates={this.state.activeStates}\n          nextDay={this.nextDay}\n          clearStorage={this.clearStorage}\n        />\n\n      </AppStyled>\n\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}