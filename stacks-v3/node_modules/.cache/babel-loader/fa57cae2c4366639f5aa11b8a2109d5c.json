{"ast":null,"code":"import _toConsumableArray from \"/Users/benreimer/Develop/stacks/stacks-v3/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/benreimer/Develop/stacks/stacks-v3/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/benreimer/Develop/stacks/stacks-v3/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/benreimer/Develop/stacks/stacks-v3/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/benreimer/Develop/stacks/stacks-v3/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/benreimer/Develop/stacks/stacks-v3/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _taggedTemplateLiteral from \"/Users/benreimer/Develop/stacks/stacks-v3/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/Users/benreimer/Develop/stacks/stacks-v3/src/App.js\";\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\n  h3, h4 {\\n    font-family : 'Poppins';\\n    font-weight : 700;\\n  }\\n  body {\\n    font-family: 'Roboto';\\n    font-weight: 400;\\n  }\\n  html {\\n    font-size: 16px;\\n    overflow: scroll;\\n    overflow-x: hidden;\\n  }\\n  ::-webkit-scrollbar {\\n    width: 0px;  /* remove scrollbar space */\\n    background: transparent;  /* optional: just make scrollbar invisible */\\n  }\\n  button {\\n      padding: 0; border: none; font: inherit; color: inherit; background-color: transparent;\\n      border-radius: 6px;\\n      height: 40px;\\n      width:85px;\\n      padding-top: 5px;\\n      font-family: Poppins;\\n      font-weight: 500;\\n      font-size: 1.25rem;\\n      color: #3D3D3D;\\n      text-align: center;\\n  }\\n  button:focus{\\n    outline: none;\\n  }\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n  @import url('https://fonts.googleapis.com/css?family=Poppins:500,700');\\n  @import url('https://fonts.googleapis.com/css?family=Roboto:300i,400,500');\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  position:relative;\\n  overflow:hidden;\\n  width:100%;\\n  max-width: 500px;\\n  margin: 0 auto;\\n  display: block;\\n  padding-top: 100px;\\n\\n  @media(min-width:769px){\\n    .App {\\n      margin-top: 40px;\\n    }\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { Component } from 'react';\nimport './App.css';\nimport ViewStacks from './Components/ViewStacks';\nimport { arrayMove } from 'react-sortable-hoc';\nimport styled, { createGlobalStyle } from 'styled-components';\n/**************\nTO DO\n\n\n!- See if you can refactor state so stack info is in the same overall item as stacks.\nMaybe adding in an extra layer of array for sortable lib is all that is needed?\n\n\n- Ability to Add a new stack\n- Ability to rearrange stacks\n- Add new habits\n- toggle animation\n- stack bar color when all complete\n- Streak counter 'working'\n- 'Edit' button\n\n\n- remove unneeded fonts when style is done\n\nNote:\narray of habits (stacks[]) is separate from array of stack info (stacksInfo[])\ndue to how Sortable library works with arrys not objects. Unless I go into their\nlibrary and make some changes I'm stuck with this setup I believe.\nThis is technical debt that may hurt later.\nhttps://github.com/clauderic/react-sortable-hoc\n\nNote:\nNever figured out importing local font files. Might have something to do with needing\nto add a loader to webpack\n\n**************/\n\nvar AppStyled = styled.div(_templateObject());\nvar Typography = createGlobalStyle(_templateObject2());\nvar GlobalStyles = createGlobalStyle(_templateObject3());\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, App);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(App)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      stacks: [[{\n        action: \"Meditate 15mins\",\n        cue: \"7:00am\",\n        result: \"neutral\",\n        log: [\"complete\"]\n      }, {\n        action: \"Exercise\",\n        cue: \"then\",\n        result: \"neutral\",\n        log: [\"complete\"]\n      }]],\n      stacksInfo: [{\n        name: \"Routine One\",\n        streak: 0,\n        height: \"auto\"\n      }],\n      lastLoggedDate: null,\n      lastLoggedMonth: null,\n      dayOfHabit: 0,\n      activeStates: {\n        addModeIsActive: false,\n        addModuleIsActive: false,\n        editModeIsActive: false\n      }\n    };\n\n    _this.habitResultHandler = function (result) {\n      switch (result) {\n        case \"neutral\":\n          return \"complete\";\n\n        case \"complete\":\n          return \"miss\";\n\n        case \"miss\":\n          return \"skip\";\n\n        case \"skip\":\n          return \"neutral\";\n\n        default:\n          return \"neutral\";\n      }\n    };\n\n    _this.habitEasyComplete = function (itemId, stackId) {\n      //turn earlier habits in stack into 'complete' if they're neutral\n      var newStack = _toConsumableArray(_this.state.stacks);\n\n      newStack[stackId] = newStack[stackId].map(function (habit, i) {\n        if (itemId > i && habit.result === \"neutral\") {\n          return habit.result = \"complete\";\n        }\n\n        return;\n      });\n\n      _this.setState({\n        oldStack: newStack\n      });\n    };\n\n    _this.logHabit = function (itemId, stackId) {\n      var newStack = _toConsumableArray(_this.state.stacks);\n\n      var result = newStack[stackId][itemId].result;\n\n      var updatedResult = _this.habitResultHandler(result); //toggle through results\n\n\n      if (updatedResult === \"complete\") {\n        //see if the easy complete is used\n        _this.habitEasyComplete(itemId, stackId);\n      }\n\n      newStack[stackId][itemId].result = updatedResult; //add to habit log\n\n      var log = newStack[stackId][itemId].log;\n      log[_this.state.dayOfHabit] = updatedResult;\n      newStack[stackId][itemId].log = log;\n\n      _this.setState({\n        stacks: newStack\n      });\n\n      _this.updateLocaLStorage(newStack);\n    };\n\n    _this.addHabit = function (stackId) {\n      var newStack = _toConsumableArray(_this.state.stacks);\n\n      var activeStates = _this.state.activeStates;\n      var newActiveStates = activeStates;\n      newActiveStates.addModuleIsActive = true;\n\n      _this.setState({\n        activeStates: newActiveStates\n      });\n\n      var cue = prompt(\"Cue : \");\n      var action = prompt(\"Action : \");\n      newStack[stackId].push({\n        action: action,\n        cue: cue,\n        result: \"neutral\",\n        log: []\n      });\n\n      _this.setState({\n        stacks: newStack\n      });\n\n      _this.updateLocaLStorage(newStack);\n    };\n\n    _this.onSortEnd = function (_ref) {\n      var oldIndex = _ref.oldIndex,\n          newIndex = _ref.newIndex,\n          collection = _ref.collection;\n\n      _this.setState(function (_ref2) {\n        var stacks = _ref2.stacks;\n\n        var newstacks = _toConsumableArray(stacks);\n\n        newstacks[collection] = arrayMove(stacks[collection], oldIndex, newIndex);\n        return {\n          stacks: newstacks\n        };\n      });\n    };\n\n    _this.toggleStack = function (id) {\n      var toggleStack = _this.state.stacksInfo[id];\n      var newStack = toggleStack;\n      newStack.height = toggleStack.height === 0 ? 'auto' : 0;\n\n      _this.setState({\n        toggleStack: newStack\n      });\n    };\n\n    _this.toggleAddMode = function () {\n      var activeState = _this.state.activeStates;\n      var newActiveState = activeState;\n      newActiveState.addModeIsActive = !activeState.addModeIsActive;\n\n      _this.setState({\n        activeState: newActiveState\n      });\n    };\n\n    _this.checkIsSameDay = function (thisDay, thisMonth) {\n      if (thisDay !== _this.state.lastLoggedDate && thisMonth !== _this.state.lastLoggedMonth) {\n        // console.log(\"it's a new day!\");\n        return false;\n      } else if (thisDay === _this.state.lastLoggedDate && thisMonth === _this.state.lastLoggedMonth) {\n        // console.log(\"same day\");\n        return true;\n      }\n    };\n\n    _this.updateDate = function (thisDay, thisMonth) {\n      var dayOfHabit = _this.state.dayOfHabit;\n      var nextDayOfHabit = dayOfHabit + 1;\n\n      _this.setState({\n        lastLoggedDate: thisDay\n      });\n\n      _this.setState({\n        lastLoggedMonth: thisMonth\n      });\n\n      _this.setState({\n        dayOfHabit: nextDayOfHabit\n      });\n    };\n\n    _this.updateLocaLStorage = function (newStack) {\n      //should be called whenever a habit is logged asap, in case the users\n      //then immediately close the app\n      localStorage.setItem(\"Stacks\", JSON.stringify(newStack));\n      console.log(\"habit stored : \", newStack);\n    };\n\n    _this.populateStateFromStorage = function () {\n      //use localStorage to re-populate state when app is refreshed\n      var newStack = JSON.parse(localStorage.getItem('Stacks'));\n\n      if (newStack) {\n        _this.setState({\n          stacks: newStack\n        });\n\n        console.log(\"populating state with : \", newStack);\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      //populate storedHabit in state from localStorage from previous sessions\n      this.populateStateFromStorage(); // localStorage.clear();\n\n      var fullDate = new Date();\n      var thisDay = fullDate.getDate();\n      var thisMonth = fullDate.getMonth();\n      var res = this.checkIsSameDay(thisDay, thisMonth);\n\n      if (!res) {\n        this.updateDate(thisDay, thisMonth);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(AppStyled, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 304\n        },\n        __self: this\n      }, React.createElement(Typography, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 306\n        },\n        __self: this\n      }), React.createElement(GlobalStyles, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 307\n        },\n        __self: this\n      }), React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 308\n        },\n        __self: this\n      }, \"v4\"), React.createElement(ViewStacks, {\n        stacks: this.state,\n        stacksInfo: this.state.stacksInfo,\n        day: this.state.dayOfHabit,\n        toggleStack: this.toggleStack,\n        logHabit: this.logHabit,\n        onSortEnd: this.onSortEnd,\n        addHabit: this.addHabit,\n        toggleAddMode: this.toggleAddMode,\n        activeStates: this.state.activeStates,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 309\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["/Users/benreimer/Develop/stacks/stacks-v3/src/App.js"],"names":["React","Component","ViewStacks","arrayMove","styled","createGlobalStyle","AppStyled","div","Typography","GlobalStyles","App","state","stacks","action","cue","result","log","stacksInfo","name","streak","height","lastLoggedDate","lastLoggedMonth","dayOfHabit","activeStates","addModeIsActive","addModuleIsActive","editModeIsActive","habitResultHandler","habitEasyComplete","itemId","stackId","newStack","map","habit","i","setState","oldStack","logHabit","updatedResult","updateLocaLStorage","addHabit","newActiveStates","prompt","push","onSortEnd","oldIndex","newIndex","collection","newstacks","toggleStack","id","toggleAddMode","activeState","newActiveState","checkIsSameDay","thisDay","thisMonth","updateDate","nextDayOfHabit","localStorage","setItem","JSON","stringify","console","populateStateFromStorage","parse","getItem","fullDate","Date","getDate","getMonth","res"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAO,WAAP;AACA,OAAOC,UAAP,MAAuB,yBAAvB;AACA,SAAQC,SAAR,QAAwB,oBAAxB;AACA,OAAOC,MAAP,IAAgBC,iBAAhB,QAAwC,mBAAxC;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgCA,IAAMC,SAAS,GAAGF,MAAM,CAACG,GAAV,mBAAf;AAeA,IAAMC,UAAU,GAAGH,iBAAH,oBAAhB;AAIA,IAAMI,YAAY,GAAGJ,iBAAH,oBAAlB;;IAqCMK,G;;;;;;;;;;;;;;;;;UAIJC,K,GAAQ;AACNC,MAAAA,MAAM,EAAG,CACP,CACE;AACEC,QAAAA,MAAM,EAAG,iBADX;AAEEC,QAAAA,GAAG,EAAE,QAFP;AAGEC,QAAAA,MAAM,EAAE,SAHV;AAIEC,QAAAA,GAAG,EAAG,CAAC,UAAD;AAJR,OADF,EAOE;AACEH,QAAAA,MAAM,EAAC,UADT;AAEEC,QAAAA,GAAG,EAAC,MAFN;AAGEC,QAAAA,MAAM,EAAE,SAHV;AAIEC,QAAAA,GAAG,EAAG,CAAC,UAAD;AAJR,OAPF,CADO,CADH;AAiBNC,MAAAA,UAAU,EAAG,CACX;AAAEC,QAAAA,IAAI,EAAG,aAAT;AAAwBC,QAAAA,MAAM,EAAE,CAAhC;AAAmCC,QAAAA,MAAM,EAAG;AAA5C,OADW,CAjBP;AAoBNC,MAAAA,cAAc,EAAG,IApBX;AAqBNC,MAAAA,eAAe,EAAG,IArBZ;AAsBNC,MAAAA,UAAU,EAAG,CAtBP;AAuBNC,MAAAA,YAAY,EAAG;AACbC,QAAAA,eAAe,EAAG,KADL;AAEbC,QAAAA,iBAAiB,EAAG,KAFP;AAGbC,QAAAA,gBAAgB,EAAG;AAHN;AAvBT,K;;UAmCRC,kB,GAAqB,UAACb,MAAD,EAAY;AAC/B,cAAQA,MAAR;AACE,aAAK,SAAL;AACE,iBAAO,UAAP;;AACF,aAAK,UAAL;AACE,iBAAO,MAAP;;AACF,aAAK,MAAL;AACE,iBAAO,MAAP;;AACF,aAAK,MAAL;AACE,iBAAO,SAAP;;AACF;AACE,iBAAO,SAAP;AAVJ;AAYD,K;;UACDc,iB,GAAoB,UAACC,MAAD,EAASC,OAAT,EAAqB;AACvC;AAEA,UAAMC,QAAQ,sBAAO,MAAKrB,KAAL,CAAWC,MAAlB,CAAd;;AAEAoB,MAAAA,QAAQ,CAACD,OAAD,CAAR,GAAoBC,QAAQ,CAACD,OAAD,CAAR,CAAkBE,GAAlB,CAAuB,UAACC,KAAD,EAAQC,CAAR,EAAc;AACvD,YAAIL,MAAM,GAAGK,CAAT,IAAcD,KAAK,CAACnB,MAAN,KAAgB,SAAlC,EAA4C;AAC1C,iBAAOmB,KAAK,CAACnB,MAAN,GAAe,UAAtB;AACD;;AACD;AACD,OALmB,CAApB;;AAOA,YAAKqB,QAAL,CAAc;AAACC,QAAAA,QAAQ,EAAGL;AAAZ,OAAd;AACD,K;;UACDM,Q,GAAW,UAACR,MAAD,EAASC,OAAT,EAAqB;AAE9B,UAAMC,QAAQ,sBAAO,MAAKrB,KAAL,CAAWC,MAAlB,CAAd;;AACA,UAAMG,MAAM,GAAGiB,QAAQ,CAACD,OAAD,CAAR,CAAkBD,MAAlB,EAA0Bf,MAAzC;;AACA,UAAMwB,aAAa,GAAG,MAAKX,kBAAL,CAAwBb,MAAxB,CAAtB,CAJ8B,CAIyB;;;AAEvD,UAAIwB,aAAa,KAAK,UAAtB,EAAiC;AAC/B;AACA,cAAKV,iBAAL,CAAuBC,MAAvB,EAA+BC,OAA/B;AACD;;AAEDC,MAAAA,QAAQ,CAACD,OAAD,CAAR,CAAkBD,MAAlB,EAA0Bf,MAA1B,GAAmCwB,aAAnC,CAX8B,CAa9B;;AACA,UAAMvB,GAAG,GAAGgB,QAAQ,CAACD,OAAD,CAAR,CAAkBD,MAAlB,EAA0Bd,GAAtC;AACAA,MAAAA,GAAG,CAAC,MAAKL,KAAL,CAAWY,UAAZ,CAAH,GAA6BgB,aAA7B;AACAP,MAAAA,QAAQ,CAACD,OAAD,CAAR,CAAkBD,MAAlB,EAA0Bd,GAA1B,GAAgCA,GAAhC;;AAEA,YAAKoB,QAAL,CAAc;AAACxB,QAAAA,MAAM,EAAGoB;AAAV,OAAd;;AACA,YAAKQ,kBAAL,CAAwBR,QAAxB;AAED,K;;UACDS,Q,GAAW,UAACV,OAAD,EAAa;AAEtB,UAAMC,QAAQ,sBAAO,MAAKrB,KAAL,CAAWC,MAAlB,CAAd;;AAEA,UAAMY,YAAY,GAAG,MAAKb,KAAL,CAAWa,YAAhC;AACA,UAAMkB,eAAe,GAAGlB,YAAxB;AAEAkB,MAAAA,eAAe,CAAChB,iBAAhB,GAAoC,IAApC;;AACA,YAAKU,QAAL,CAAc;AAAEZ,QAAAA,YAAY,EAAGkB;AAAjB,OAAd;;AAEA,UAAI5B,GAAG,GAAG6B,MAAM,CAAC,QAAD,CAAhB;AACA,UAAI9B,MAAM,GAAG8B,MAAM,CAAC,WAAD,CAAnB;AACAX,MAAAA,QAAQ,CAACD,OAAD,CAAR,CAAkBa,IAAlB,CACE;AACE/B,QAAAA,MAAM,EAAGA,MADX;AAEEC,QAAAA,GAAG,EAAEA,GAFP;AAGEC,QAAAA,MAAM,EAAE,SAHV;AAIEC,QAAAA,GAAG,EAAG;AAJR,OADF;;AASA,YAAKoB,QAAL,CAAc;AAACxB,QAAAA,MAAM,EAAGoB;AAAV,OAAd;;AACA,YAAKQ,kBAAL,CAAwBR,QAAxB;AACD,K;;UAEDa,S,GAAY,gBAAsC;AAAA,UAApCC,QAAoC,QAApCA,QAAoC;AAAA,UAA1BC,QAA0B,QAA1BA,QAA0B;AAAA,UAAhBC,UAAgB,QAAhBA,UAAgB;;AAChD,YAAKZ,QAAL,CAAc,iBAAc;AAAA,YAAZxB,MAAY,SAAZA,MAAY;;AAC1B,YAAMqC,SAAS,sBAAOrC,MAAP,CAAf;;AAEAqC,QAAAA,SAAS,CAACD,UAAD,CAAT,GAAwB7C,SAAS,CAC/BS,MAAM,CAACoC,UAAD,CADyB,EAE/BF,QAF+B,EAG/BC,QAH+B,CAAjC;AAKA,eAAO;AAACnC,UAAAA,MAAM,EAAEqC;AAAT,SAAP;AACD,OATD;AAUD,K;;UAGDC,W,GAAc,UAACC,EAAD,EAAQ;AACpB,UAAID,WAAW,GAAG,MAAKvC,KAAL,CAAWM,UAAX,CAAsBkC,EAAtB,CAAlB;AACA,UAAInB,QAAQ,GAAGkB,WAAf;AAEAlB,MAAAA,QAAQ,CAACZ,MAAT,GAAkB8B,WAAW,CAAC9B,MAAZ,KAAuB,CAAvB,GAA2B,MAA3B,GAAoC,CAAtD;;AAEA,YAAKgB,QAAL,CAAc;AACZc,QAAAA,WAAW,EAAGlB;AADF,OAAd;AAGD,K;;UACDoB,a,GAAgB,YAAM;AACpB,UAAMC,WAAW,GAAG,MAAK1C,KAAL,CAAWa,YAA/B;AACA,UAAM8B,cAAc,GAAGD,WAAvB;AACAC,MAAAA,cAAc,CAAC7B,eAAf,GAAiC,CAAC4B,WAAW,CAAC5B,eAA9C;;AACA,YAAKW,QAAL,CAAc;AAAEiB,QAAAA,WAAW,EAAGC;AAAhB,OAAd;AACD,K;;UACDC,c,GAAiB,UAACC,OAAD,EAAUC,SAAV,EAAwB;AACvC,UAAID,OAAO,KAAK,MAAK7C,KAAL,CAAWU,cAAvB,IAAyCoC,SAAS,KAAK,MAAK9C,KAAL,CAAWW,eAAtE,EAAsF;AACpF;AACA,eAAO,KAAP;AACD,OAHD,MAIK,IAAIkC,OAAO,KAAK,MAAK7C,KAAL,CAAWU,cAAvB,IAAyCoC,SAAS,KAAK,MAAK9C,KAAL,CAAWW,eAAtE,EAAsF;AACzF;AACA,eAAO,IAAP;AACD;AACF,K;;UACDoC,U,GAAa,UAACF,OAAD,EAAUC,SAAV,EAAwB;AAEnC,UAAIlC,UAAU,GAAG,MAAKZ,KAAL,CAAWY,UAA5B;AACA,UAAIoC,cAAc,GAAGpC,UAAU,GAAG,CAAlC;;AAEA,YAAKa,QAAL,CAAc;AAACf,QAAAA,cAAc,EAAGmC;AAAlB,OAAd;;AACA,YAAKpB,QAAL,CAAc;AAACd,QAAAA,eAAe,EAAGmC;AAAnB,OAAd;;AACA,YAAKrB,QAAL,CAAc;AAACb,QAAAA,UAAU,EAAGoC;AAAd,OAAd;AACD,K;;UAGDnB,kB,GAAqB,UAACR,QAAD,EAAc;AAC/B;AACA;AAEA4B,MAAAA,YAAY,CAACC,OAAb,CAAqB,QAArB,EAA+BC,IAAI,CAACC,SAAL,CAAe/B,QAAf,CAA/B;AACAgC,MAAAA,OAAO,CAAChD,GAAR,CAAY,iBAAZ,EAA+BgB,QAA/B;AAEH,K;;UACDiC,wB,GAA2B,YAAM;AAC/B;AACA,UAAIjC,QAAQ,GAAG8B,IAAI,CAACI,KAAL,CAAWN,YAAY,CAACO,OAAb,CAAqB,QAArB,CAAX,CAAf;;AAEA,UAAInC,QAAJ,EAAc;AACZ,cAAKI,QAAL,CAAc;AAAExB,UAAAA,MAAM,EAAGoB;AAAX,SAAd;;AACAgC,QAAAA,OAAO,CAAChD,GAAR,CAAY,0BAAZ,EAAwCgB,QAAxC;AACD;AACF,K;;;;;;;wCAGmB;AAElB;AACA,WAAKiC,wBAAL,GAHkB,CAKlB;;AACA,UAAIG,QAAQ,GAAG,IAAIC,IAAJ,EAAf;AACA,UAAIb,OAAO,GAAGY,QAAQ,CAACE,OAAT,EAAd;AACA,UAAIb,SAAS,GAAGW,QAAQ,CAACG,QAAT,EAAhB;AACA,UAAIC,GAAG,GAAG,KAAKjB,cAAL,CAAoBC,OAApB,EAA6BC,SAA7B,CAAV;;AAIA,UAAI,CAACe,GAAL,EAAS;AACP,aAAKd,UAAL,CAAgBF,OAAhB,EAAyBC,SAAzB;AACD;AACF;;;6BAKQ;AAGP,aACE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAEE,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,EAGE,oBAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAHF,EAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAJF,EAKE,oBAAC,UAAD;AACE,QAAA,MAAM,EAAE,KAAK9C,KADf;AAEE,QAAA,UAAU,EAAE,KAAKA,KAAL,CAAWM,UAFzB;AAGE,QAAA,GAAG,EAAE,KAAKN,KAAL,CAAWY,UAHlB;AAIE,QAAA,WAAW,EAAE,KAAK2B,WAJpB;AAKE,QAAA,QAAQ,EAAE,KAAKZ,QALjB;AAME,QAAA,SAAS,EAAE,KAAKO,SANlB;AAOE,QAAA,QAAQ,EAAE,KAAKJ,QAPjB;AAQE,QAAA,aAAa,EAAE,KAAKW,aARtB;AASE,QAAA,YAAY,EAAE,KAAKzC,KAAL,CAAWa,YAT3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QALF,CADF;AAqBD;;;;EArOevB,S;;AAwOlB,eAAeS,GAAf","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\nimport ViewStacks from './Components/ViewStacks';\nimport {arrayMove} from 'react-sortable-hoc';\nimport styled, {createGlobalStyle} from 'styled-components';\n\n/**************\nTO DO\n\n\n!- See if you can refactor state so stack info is in the same overall item as stacks.\nMaybe adding in an extra layer of array for sortable lib is all that is needed?\n\n\n- Ability to Add a new stack\n- Ability to rearrange stacks\n- Add new habits\n- toggle animation\n- stack bar color when all complete\n- Streak counter 'working'\n- 'Edit' button\n\n\n- remove unneeded fonts when style is done\n\nNote:\narray of habits (stacks[]) is separate from array of stack info (stacksInfo[])\ndue to how Sortable library works with arrys not objects. Unless I go into their\nlibrary and make some changes I'm stuck with this setup I believe.\nThis is technical debt that may hurt later.\nhttps://github.com/clauderic/react-sortable-hoc\n\nNote:\nNever figured out importing local font files. Might have something to do with needing\nto add a loader to webpack\n\n**************/\n\nconst AppStyled = styled.div`\n  position:relative;\n  overflow:hidden;\n  width:100%;\n  max-width: 500px;\n  margin: 0 auto;\n  display: block;\n  padding-top: 100px;\n\n  @media(min-width:769px){\n    .App {\n      margin-top: 40px;\n    }\n  }\n`\nconst Typography = createGlobalStyle`\n  @import url('https://fonts.googleapis.com/css?family=Poppins:500,700');\n  @import url('https://fonts.googleapis.com/css?family=Roboto:300i,400,500');\n`;\nconst GlobalStyles = createGlobalStyle`\n  h3, h4 {\n    font-family : 'Poppins';\n    font-weight : 700;\n  }\n  body {\n    font-family: 'Roboto';\n    font-weight: 400;\n  }\n  html {\n    font-size: 16px;\n    overflow: scroll;\n    overflow-x: hidden;\n  }\n  ::-webkit-scrollbar {\n    width: 0px;  /* remove scrollbar space */\n    background: transparent;  /* optional: just make scrollbar invisible */\n  }\n  button {\n      padding: 0; border: none; font: inherit; color: inherit; background-color: transparent;\n      border-radius: 6px;\n      height: 40px;\n      width:85px;\n      padding-top: 5px;\n      font-family: Poppins;\n      font-weight: 500;\n      font-size: 1.25rem;\n      color: #3D3D3D;\n      text-align: center;\n  }\n  button:focus{\n    outline: none;\n  }\n`;\n\n\n\nclass App extends Component {\n\n\n\n  state = {\n    stacks : [\n      [\n        {\n          action : \"Meditate 15mins\",\n          cue: \"7:00am\",\n          result: \"neutral\",\n          log : [\"complete\"],\n        },\n        {\n          action:\"Exercise\",\n          cue:\"then\",\n          result: \"neutral\",\n          log : [\"complete\"],\n        },\n      ],\n    ],\n    stacksInfo : [\n      { name : \"Routine One\", streak: 0, height : \"auto\", },\n    ],\n    lastLoggedDate : null,\n    lastLoggedMonth : null,\n    dayOfHabit : 0,\n    activeStates : {\n      addModeIsActive : false,\n      addModuleIsActive : false,\n      editModeIsActive : false,\n    },\n  };\n\n\n\n\n\n  //HABITS\n  habitResultHandler = (result) => {\n    switch (result){\n      case \"neutral\" :\n        return \"complete\";\n      case \"complete\" :\n        return \"miss\";\n      case \"miss\" :\n        return \"skip\";\n      case \"skip\" :\n        return \"neutral\";\n      default :\n        return \"neutral\";\n    }\n  }\n  habitEasyComplete = (itemId, stackId) => {\n    //turn earlier habits in stack into 'complete' if they're neutral\n\n    const newStack = [...this.state.stacks];\n\n    newStack[stackId] = newStack[stackId].map( (habit, i) => {\n      if (itemId > i && habit.result ===\"neutral\"){\n        return habit.result = \"complete\";\n      }\n      return\n    });\n\n    this.setState({oldStack : newStack})\n  }\n  logHabit = (itemId, stackId) => {\n\n    const newStack = [...this.state.stacks];\n    const result = newStack[stackId][itemId].result;\n    const updatedResult = this.habitResultHandler(result); //toggle through results\n\n    if (updatedResult === \"complete\"){\n      //see if the easy complete is used\n      this.habitEasyComplete(itemId, stackId);\n    }\n\n    newStack[stackId][itemId].result = updatedResult;\n\n    //add to habit log\n    const log = newStack[stackId][itemId].log;\n    log[this.state.dayOfHabit] = updatedResult;\n    newStack[stackId][itemId].log = log;\n\n    this.setState({stacks : newStack})\n    this.updateLocaLStorage(newStack);\n\n  }\n  addHabit = (stackId) => {\n\n    const newStack = [...this.state.stacks]\n\n    const activeStates = this.state.activeStates;\n    const newActiveStates = activeStates;\n\n    newActiveStates.addModuleIsActive = true;\n    this.setState({ activeStates : newActiveStates })\n\n    let cue = prompt(\"Cue : \");\n    let action = prompt(\"Action : \");\n    newStack[stackId].push(\n      {\n        action : action,\n        cue: cue,\n        result: \"neutral\",\n        log : [],\n      }\n    )\n\n    this.setState({stacks : newStack})\n    this.updateLocaLStorage(newStack);\n  }\n  //dragging habits in new order\n  onSortEnd = ({oldIndex, newIndex, collection}) => {\n    this.setState(({stacks}) => {\n      const newstacks = [...stacks];\n\n      newstacks[collection] = arrayMove(\n        stacks[collection],\n        oldIndex,\n        newIndex,\n      );\n      return {stacks: newstacks};\n    });\n  };\n\n  //OTHER\n  toggleStack = (id) => {\n    let toggleStack = this.state.stacksInfo[id];\n    let newStack = toggleStack;\n\n    newStack.height = toggleStack.height === 0 ? 'auto' : 0;\n\n    this.setState({\n      toggleStack : newStack\n    })\n  }\n  toggleAddMode = () => {\n    const activeState = this.state.activeStates;\n    const newActiveState = activeState;\n    newActiveState.addModeIsActive = !activeState.addModeIsActive;\n    this.setState({ activeState : newActiveState})\n  }\n  checkIsSameDay = (thisDay, thisMonth) => {\n    if (thisDay !== this.state.lastLoggedDate && thisMonth !== this.state.lastLoggedMonth){\n      // console.log(\"it's a new day!\");\n      return false;\n    }\n    else if (thisDay === this.state.lastLoggedDate && thisMonth === this.state.lastLoggedMonth){\n      // console.log(\"same day\");\n      return true;\n    }\n  }\n  updateDate = (thisDay, thisMonth) => {\n\n    let dayOfHabit = this.state.dayOfHabit;\n    let nextDayOfHabit = dayOfHabit + 1;\n\n    this.setState({lastLoggedDate : thisDay});\n    this.setState({lastLoggedMonth : thisMonth});\n    this.setState({dayOfHabit : nextDayOfHabit});\n  }\n\n  //STORAGE\n  updateLocaLStorage = (newStack) => {\n      //should be called whenever a habit is logged asap, in case the users\n      //then immediately close the app\n\n      localStorage.setItem(\"Stacks\", JSON.stringify(newStack));\n      console.log(\"habit stored : \", newStack);\n\n  }\n  populateStateFromStorage = () => {\n    //use localStorage to re-populate state when app is refreshed\n    let newStack = JSON.parse(localStorage.getItem('Stacks'));\n\n    if (newStack) {\n      this.setState({ stacks : newStack})\n      console.log(\"populating state with : \", newStack);\n    }\n  }\n\n\n  componentDidMount() {\n\n    //populate storedHabit in state from localStorage from previous sessions\n    this.populateStateFromStorage();\n\n    // localStorage.clear();\n    let fullDate = new Date();\n    let thisDay = fullDate.getDate();\n    let thisMonth = fullDate.getMonth();\n    let res = this.checkIsSameDay(thisDay, thisMonth);\n\n\n\n    if (!res){\n      this.updateDate(thisDay, thisMonth);\n    }\n  }\n\n\n\n\n  render() {\n\n\n    return (\n      <AppStyled>\n\n        <Typography />\n        <GlobalStyles />\n        <h2>v4</h2>\n        <ViewStacks\n          stacks={this.state}\n          stacksInfo={this.state.stacksInfo}\n          day={this.state.dayOfHabit}\n          toggleStack={this.toggleStack}\n          logHabit={this.logHabit}\n          onSortEnd={this.onSortEnd}\n          addHabit={this.addHabit}\n          toggleAddMode={this.toggleAddMode}\n          activeStates={this.state.activeStates}\n        />\n\n      </AppStyled>\n\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}